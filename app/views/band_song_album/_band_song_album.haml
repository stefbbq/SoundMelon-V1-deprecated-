- show_all ||=false
.album[song_album]
  .album_info_wrapper
    .album_teaser_image
      = link_to get_album_cover_image(song_album, 'medium'), band_album_songs_path(@band.name, song_album.album_name), :remote=>:true, :class=>"ajaxopen"
      %br
      = link_to 'Edit', edit_band_song_album_path(@band.name, song_album.album_name ), :remote => true, :class => 'ajaxopen' if @has_admin_access
    .album_info
      .album_name
        = link_to "#{song_album.album_name}", band_album_songs_path(@band.name, song_album.album_name), :remote=>:true, :class=>"ajaxopen"
        %br
        Released
        = song_album.created_at.strftime("%b %d, %Y")
      .album_controls
        = link_to image_tag('download-icon.png'), download_song_album_path(@band.name, song_album.id)
        = link_to image_tag('play-icon.png'), add_album_to_player_playlist_path(song_album), :remote => true, :class => 'ajaxopen'
        = link_to image_tag('queue-icon.png'), add_album_to_playlist_path(song_album), :remote => true, :class => 'ajaxopen'
        = link_to image_tag('buzz-icon.png'), album_buzz_path(song_album.album_name, song_album.id), :remote => true, :class => 'ajaxopen'
    .clear
  .additional_info
    .song_stats{:id =>"song_stats_#{song_album.id}"}
      .price
        = "$#{song_album.price}"
      %span{:id =>'song_count'}= pluralize(song_album.song_count, 'song')
    - if @has_admin_access
      .album_controls{:style=>'float:left;width:50px;margin-left:150px;'}        
        = link_to song_album.disabled? ? 'enable' : 'disable', disable_enable_band_song_albums_path(@band.name, song_album.album_name), :remote=>:true, :class=>"ajaxopen", :id =>"public_view_link_#{song_album.id}"
        = link_to 'remove', delete_song_album_path(@band.name, song_album.id), :remote=>:true, :class=>"ajaxopen", :id =>"public_view_link_#{song_album.id}"
    - unless show_all
      .toggle-thread
        = link_to "expand", band_album_songs_path(@band.name, song_album.album_name), :remote=>:true, :class=>"ajaxopen", :id =>"expand_link_#{song_album.id}"
    - else
      .toggle-thread
        %a{:href => "javascript:void(0);", :onclick => "$('#song_album_#{song_album.id} .album_details').toggle();$(this).html($.trim($(this).text())=='collapse' ? 'expand' : 'collapse');"}collapse
  .album_details
    - if show_all
      - song_album.songs.each do |song|
        = render '/band_song_album/song_item', :song =>song
      .clear
- if @has_admin_access
  = link_to "", add_songs_to_album_path(@band.name, song_album.album_name ), :remote => true, :class => 'ajaxopen'
  .clear
.clear